var t=function(t){return t?t.replace(/[^\s]/gm,"â€¢"):""},n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};n.Diff=function(t,n){this[0]=t,this[1]=n},n.Diff.prototype.length=2,n.Diff.prototype.toString=function(){return this[0]+","+this[1]},n.prototype.diff_main=function(t,r,i,e){void 0===e&&(e=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var a=e;if(null==t||null==r)throw new Error("Null input. (diff_main)");if(t==r)return t?[new n.Diff(0,t)]:[];void 0===i&&(i=!0);var s=i,o=this.diff_commonPrefix(t,r),u=t.substring(0,o);t=t.substring(o),r=r.substring(o),o=this.diff_commonSuffix(t,r);var f=t.substring(t.length-o);t=t.substring(0,t.length-o),r=r.substring(0,r.length-o);var h=this.t(t,r,s,a);return u&&h.unshift(new n.Diff(0,u)),f&&h.push(new n.Diff(0,f)),this.diff_cleanupMerge(h),h},n.prototype.t=function(t,r,i,e){var a;if(!t)return[new n.Diff(1,r)];if(!r)return[new n.Diff(-1,t)];var s=t.length>r.length?t:r,o=t.length>r.length?r:t,u=s.indexOf(o);if(-1!=u)return a=[new n.Diff(1,s.substring(0,u)),new n.Diff(0,o),new n.Diff(1,s.substring(u+o.length))],t.length>r.length&&(a[0][0]=a[2][0]=-1),a;if(1==o.length)return[new n.Diff(-1,t),new n.Diff(1,r)];var f=this.i(t,r);if(f){var h=f[1],c=f[3],v=f[4],l=this.diff_main(f[0],f[2],i,e),w=this.diff_main(h,c,i,e);return l.concat([new n.Diff(0,v)],w)}return i&&t.length>100&&r.length>100?this.s(t,r,e):this.o(t,r,e)},n.prototype.s=function(t,r,i){var e=this.u(t,r),a=e.lineArray,s=this.diff_main(t=e.chars1,r=e.chars2,!1,i);this.v(s,a),this.diff_cleanupSemantic(s),s.push(new n.Diff(0,""));for(var o=0,u=0,f=0,h="",c="";o<s.length;){switch(s[o][0]){case 1:f++,c+=s[o][1];break;case-1:u++,h+=s[o][1];break;case 0:if(u>=1&&f>=1){s.splice(o-u-f,u+f),o=o-u-f;for(var v=this.diff_main(h,c,!1,i),l=v.length-1;l>=0;l--)s.splice(o,0,v[l]);o+=v.length}f=0,u=0,h="",c=""}o++}return s.pop(),s},n.prototype.o=function(t,r,i){for(var e=t.length,a=r.length,s=Math.ceil((e+a)/2),o=s,u=2*s,f=new Array(u),h=new Array(u),c=0;c<u;c++)f[c]=-1,h[c]=-1;f[o+1]=0,h[o+1]=0;for(var v=e-a,l=v%2!=0,w=0,y=0,p=0,b=0,d=0;d<s&&!((new Date).getTime()>i);d++){for(var m=-d+w;m<=d-y;m+=2){for(var g=o+m,M=(z=m==-d||m!=d&&f[g-1]<f[g+1]?f[g+1]:f[g-1]+1)-m;z<e&&M<a&&t.charAt(z)==r.charAt(M);)z++,M++;if(f[g]=z,z>e)y+=2;else if(M>a)w+=2;else if(l&&(A=o+v-m)>=0&&A<u&&-1!=h[A]&&z>=(x=e-h[A]))return this.l(t,r,z,M,i)}for(var k=-d+p;k<=d-b;k+=2){for(var x,A=o+k,j=(x=k==-d||k!=d&&h[A-1]<h[A+1]?h[A+1]:h[A-1]+1)-k;x<e&&j<a&&t.charAt(e-x-1)==r.charAt(a-j-1);)x++,j++;if(h[A]=x,x>e)b+=2;else if(j>a)p+=2;else if(!l){var z;if((g=o+v-k)>=0&&g<u&&-1!=f[g]&&(M=o+(z=f[g])-g,z>=(x=e-x)))return this.l(t,r,z,M,i)}}}return[new n.Diff(-1,t),new n.Diff(1,r)]},n.prototype.l=function(t,n,r,i,e){var a=t.substring(0,r),s=n.substring(0,i),o=t.substring(r),u=n.substring(i),f=this.diff_main(a,s,!1,e),h=this.diff_main(o,u,!1,e);return f.concat(h)},n.prototype.u=function(t,n){var r=[],i={};function e(t){for(var n="",e=0,s=-1,o=r.length;s<t.length-1;){-1==(s=t.indexOf("\n",e))&&(s=t.length-1);var u=t.substring(e,s+1);(i.hasOwnProperty?i.hasOwnProperty(u):void 0!==i[u])?n+=String.fromCharCode(i[u]):(o==a&&(u=t.substring(e),s=t.length),n+=String.fromCharCode(o),i[u]=o,r[o++]=u),e=s+1}return n}r[0]="";var a=4e4,s=e(t);return a=65535,{chars1:s,chars2:e(n),lineArray:r}},n.prototype.v=function(t,n){for(var r=0;r<t.length;r++){for(var i=t[r][1],e=[],a=0;a<i.length;a++)e[a]=n[i.charCodeAt(a)];t[r][1]=e.join("")}},n.prototype.diff_commonPrefix=function(t,n){if(!t||!n||t.charAt(0)!=n.charAt(0))return 0;for(var r=0,i=Math.min(t.length,n.length),e=i,a=0;r<e;)t.substring(a,e)==n.substring(a,e)?a=r=e:i=e,e=Math.floor((i-r)/2+r);return e},n.prototype.diff_commonSuffix=function(t,n){if(!t||!n||t.charAt(t.length-1)!=n.charAt(n.length-1))return 0;for(var r=0,i=Math.min(t.length,n.length),e=i,a=0;r<e;)t.substring(t.length-e,t.length-a)==n.substring(n.length-e,n.length-a)?a=r=e:i=e,e=Math.floor((i-r)/2+r);return e},n.prototype.p=function(t,n){var r=t.length,i=n.length;if(0==r||0==i)return 0;r>i?t=t.substring(r-i):r<i&&(n=n.substring(0,r));var e=Math.min(r,i);if(t==n)return e;for(var a=0,s=1;;){var o=t.substring(e-s),u=n.indexOf(o);if(-1==u)return a;s+=u,0!=u&&t.substring(e-s)!=n.substring(0,s)||(a=s,s++)}},n.prototype.i=function(t,n){if(this.Diff_Timeout<=0)return null;var r=t.length>n.length?t:n,i=t.length>n.length?n:t;if(r.length<4||2*i.length<r.length)return null;var e=this;function a(t,n,r){for(var i,a,s,o,u=t.substring(r,r+Math.floor(t.length/4)),f=-1,h="";-1!=(f=n.indexOf(u,f+1));){var c=e.diff_commonPrefix(t.substring(r),n.substring(f)),v=e.diff_commonSuffix(t.substring(0,r),n.substring(0,f));h.length<v+c&&(h=n.substring(f-v,f)+n.substring(f,f+c),i=t.substring(0,r-v),a=t.substring(r+c),s=n.substring(0,f-v),o=n.substring(f+c))}return 2*h.length>=t.length?[i,a,s,o,h]:null}var s,o,u,f,h,c=a(r,i,Math.ceil(r.length/4)),v=a(r,i,Math.ceil(r.length/2));return c||v?(s=v?c&&c[4].length>v[4].length?c:v:c,t.length>n.length?(o=s[0],u=s[1],f=s[2],h=s[3]):(f=s[0],h=s[1],o=s[2],u=s[3]),[o,u,f,h,s[4]]):null},n.prototype.diff_cleanupSemantic=function(t){for(var r=!1,i=[],e=0,a=null,s=0,o=0,u=0,f=0,h=0;s<t.length;)0==t[s][0]?(i[e++]=s,o=f,u=h,f=0,h=0,a=t[s][1]):(1==t[s][0]?f+=t[s][1].length:h+=t[s][1].length,a&&a.length<=Math.max(o,u)&&a.length<=Math.max(f,h)&&(t.splice(i[e-1],0,new n.Diff(-1,a)),t[i[e-1]+1][0]=1,e--,s=--e>0?i[e-1]:-1,o=0,u=0,f=0,h=0,a=null,r=!0)),s++;for(r&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),s=1;s<t.length;){if(-1==t[s-1][0]&&1==t[s][0]){var c=t[s-1][1],v=t[s][1],l=this.p(c,v),w=this.p(v,c);l>=w?(l>=c.length/2||l>=v.length/2)&&(t.splice(s,0,new n.Diff(0,v.substring(0,l))),t[s-1][1]=c.substring(0,c.length-l),t[s+1][1]=v.substring(l),s++):(w>=c.length/2||w>=v.length/2)&&(t.splice(s,0,new n.Diff(0,c.substring(0,w))),t[s-1][0]=1,t[s-1][1]=v.substring(0,v.length-w),t[s+1][0]=-1,t[s+1][1]=c.substring(w),s++),s++}s++}},n.prototype.diff_cleanupSemanticLossless=function(t){function r(t,r){if(!t||!r)return 6;var i=t.charAt(t.length-1),e=r.charAt(0),a=i.match(n.m),s=e.match(n.m),o=a&&i.match(n.g),u=s&&e.match(n.g),f=o&&i.match(n.M),h=u&&e.match(n.M),c=f&&t.match(n.k),v=h&&r.match(n.A);return c||v?5:f||h?4:a&&!o&&u?3:o||u?2:a||s?1:0}for(var i=1;i<t.length-1;){if(0==t[i-1][0]&&0==t[i+1][0]){var e=t[i-1][1],a=t[i][1],s=t[i+1][1],o=this.diff_commonSuffix(e,a);if(o){var u=a.substring(a.length-o);e=e.substring(0,e.length-o),a=u+a.substring(0,a.length-o),s=u+s}for(var f=e,h=a,c=s,v=r(e,a)+r(a,s);a.charAt(0)===s.charAt(0);){e+=a.charAt(0),a=a.substring(1)+s.charAt(0),s=s.substring(1);var l=r(e,a)+r(a,s);l>=v&&(v=l,f=e,h=a,c=s)}t[i-1][1]!=f&&(f?t[i-1][1]=f:(t.splice(i-1,1),i--),t[i][1]=h,c?t[i+1][1]=c:(t.splice(i+1,1),i--))}i++}},n.m=/[^a-zA-Z0-9]/,n.g=/\s/,n.M=/[\r\n]/,n.k=/\n\r?\n$/,n.A=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(t){for(var r=!1,i=[],e=0,a=null,s=0,o=!1,u=!1,f=!1,h=!1;s<t.length;)0==t[s][0]?(t[s][1].length<this.Diff_EditCost&&(f||h)?(i[e++]=s,o=f,u=h,a=t[s][1]):(e=0,a=null),f=h=!1):(-1==t[s][0]?h=!0:f=!0,a&&(o&&u&&f&&h||a.length<this.Diff_EditCost/2&&o+u+f+h==3)&&(t.splice(i[e-1],0,new n.Diff(-1,a)),t[i[e-1]+1][0]=1,e--,a=null,o&&u?(f=h=!0,e=0):(s=--e>0?i[e-1]:-1,f=h=!1),r=!0)),s++;r&&this.diff_cleanupMerge(t)},n.prototype.diff_cleanupMerge=function(t){t.push(new n.Diff(0,""));for(var r,i=0,e=0,a=0,s="",o="";i<t.length;)switch(t[i][0]){case 1:a++,o+=t[i][1],i++;break;case-1:e++,s+=t[i][1],i++;break;case 0:e+a>1?(0!==e&&0!==a&&(0!==(r=this.diff_commonPrefix(o,s))&&(i-e-a>0&&0==t[i-e-a-1][0]?t[i-e-a-1][1]+=o.substring(0,r):(t.splice(0,0,new n.Diff(0,o.substring(0,r))),i++),o=o.substring(r),s=s.substring(r)),0!==(r=this.diff_commonSuffix(o,s))&&(t[i][1]=o.substring(o.length-r)+t[i][1],o=o.substring(0,o.length-r),s=s.substring(0,s.length-r))),t.splice(i-=e+a,e+a),s.length&&(t.splice(i,0,new n.Diff(-1,s)),i++),o.length&&(t.splice(i,0,new n.Diff(1,o)),i++),i++):0!==i&&0==t[i-1][0]?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,a=0,e=0,s="",o=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(i=1;i<t.length-1;)0==t[i-1][0]&&0==t[i+1][0]&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),u=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),u=!0)),i++;u&&this.diff_cleanupMerge(t)},n.prototype.diff_text1=function(t){for(var n=[],r=0;r<t.length;r++)1!==t[r][0]&&(n[r]=t[r][1]);return n.join("")},n.prototype.j=function(t,r){if(0!=r.length){if(null===t.start2)throw Error("patch not initialized");for(var i=r.substring(t.start2,t.start2+t.length1),e=0;r.indexOf(i)!=r.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i=r.substring(t.start2-(e+=this.Patch_Margin),t.start2+t.length1+e);var a=r.substring(t.start2-(e+=this.Patch_Margin),t.start2);a&&t.diffs.unshift(new n.Diff(0,a));var s=r.substring(t.start2+t.length1,t.start2+t.length1+e);s&&t.diffs.push(new n.Diff(0,s)),t.start1-=a.length,t.start2-=a.length,t.length1+=a.length+s.length,t.length2+=a.length+s.length}},n.prototype.patch_make=function(t,r,i){var e,a;if("string"==typeof t&&"string"==typeof r&&void 0===i)(a=this.diff_main(e=t,r,!0)).length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(t&&"object"==typeof t&&void 0===r&&void 0===i)e=this.diff_text1(a=t);else if("string"==typeof t&&r&&"object"==typeof r&&void 0===i)e=t,a=r;else{if("string"!=typeof t||"string"!=typeof r||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");e=t,a=i}if(0===a.length)return[];for(var s=[],o=new n.patch_obj,u=0,f=0,h=0,c=e,v=e,l=0;l<a.length;l++){var w=a[l][0],y=a[l][1];switch(u||0===w||(o.start1=f,o.start2=h),w){case 1:o.diffs[u++]=a[l],o.length2+=y.length,v=v.substring(0,h)+y+v.substring(h);break;case-1:o.length1+=y.length,o.diffs[u++]=a[l],v=v.substring(0,h)+v.substring(h+y.length);break;case 0:y.length<=2*this.Patch_Margin&&u&&a.length!=l+1?(o.diffs[u++]=a[l],o.length1+=y.length,o.length2+=y.length):y.length>=2*this.Patch_Margin&&u&&(this.j(o,c),s.push(o),o=new n.patch_obj,u=0,c=v,f=h)}1!==w&&(f+=y.length),-1!==w&&(h+=y.length)}return u&&(this.j(o,c),s.push(o)),s},n.prototype.patch_toText=function(t){for(var n=[],r=0;r<t.length;r++)n[r]=t[r];return n.join("")},n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},n.patch_obj.prototype.toString=function(){for(var t,n=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}n[r+1]=t+encodeURI(this.diffs[r][1])+"\n"}return n.join("").replace(/%20/g," ")};var r=new n,i=function(t){for(var n=5381,r=t.length;r;)n=33*n^t.charCodeAt(--r);return n>>>0},e=!1;try{var a=Object.defineProperty({},"passive",{get:function(){e={passive:!0}}});window.addEventListener("testPassive",null,a),window.removeEventListener("testPassive",null,a)}catch(t){}var s=function(t,n,r){return t.addEventListener(n,r,e)},o=function(t){var n="",r=t.name;if(r)return n+'[name="'+r+'"]';if(t.id)return n+"#"+t.id;t.className&&(n+="."+t.className.split(" ").join("."));var i=t.form;return i&&i.id&&(n="#"+i.id+" "+n),n},u={html:function(n,e){var a=i(""),s="",o=function(){var o=n.innerHTML.replace(/value="([^"]+)"/gm,function(n,r){return'value="'+t(r)+'"'}).replace(/value='([^']+)'/gm,function(n,r){return"value='"+t(r)+"'"}),u=function(t,n){var i=r.patch_make(s,o);return r.patch_toText(i)}();e({patch:u,hash:a}),s=o,a=i(o)};o(),new MutationObserver(o).observe(n,{attributes:!0,childList:!0,subtree:!0,characterData:!0})},focus:function(t,n){s(t,"focusin",function(t){var r=t.target,i=r.parentNode,e=o(r);n({event:{type:"focusin",selector:e,index:Array.prototype.indexOf.call(i.children,r)}})})},change:function(n,r){s(n,"change",function(n){var i=n.target;if(!Number.isInteger(i.selectedIndex)){var e=i.parentNode,a=o(i);r({event:{type:"change",selector:a,index:Array.prototype.indexOf.call(e.children,i),value:t(i.value)}})}})},select:function(t,n){s(t,"change",function(t){var r=t.target,i=r.selectedIndex;if(Number.isInteger(i)){var e=o(r);n({event:{type:"select",selector:e,index:i}})}})},scroll:function(t,n){var r={x:0,y:0},i=!1;s(window,"scroll",function(){r.x=window.pageXOffset,r.y=window.pageYOffset,i||(setTimeout(function(){n({event:{type:"scroll",x:r.x,y:r.y}}),i=!1},100),i=!0)})},mouse:function(t,n){var r=!1,i={x:0,y:0};s(t,"mousemove",function(t){i.x=t.clientX,i.y=t.clientY,r||(setTimeout(function(){r=!1,n({event:{type:"mousemove",x:i.x,y:i.y}})},100),r=!0)})},resize:function(t,n){var r=!1;s(window,"resize",function(){r||(setTimeout(function(){var i=t.getBoundingClientRect();n({event:{type:"resize",w:i.width,h:i.height}}),r=!1},100),r=!0)})}};exports.observe=function(t){var n=new WebSocket("ws://localhost:8080");n.addEventListener("open",function(){var r=function(t){t.time=Date.now(),function(t,n){console.log({snapshot:t}),n.send(JSON.stringify(t))}(t,n)};Object.keys(u).forEach(function(n){u[n](t,r)})})};
//# sourceMappingURL=sender.js.map
